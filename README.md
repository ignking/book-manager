необходимо настроить MySQL
Я думаю, что на вашем хост-компьютере есть настройка Gradle. Итак, теперь мы запускаем команду gradle build, чтобы собрать проект. Таким образом, исполняемый файл jar создается в каталоге build / jar вашего клонированного проекта.
Теперь откройте Docker file
Этот файл содержит последовательные команды для выполнения в докере. Он создаст образ java 8., а также скопирует файл jar с хост-машины в образ докера, а затем запустит команду, которая задана в аргументах точки входа. Теперь мы создадим образ докера, используя этот Dockerfile.
Эта команда создаст образ Docker с именем book_manager_app на машине Docker. Здесь команда -f указывает имя файла Docker. Теперь запустите этот образ как контейнер.
Команда --link позволяет контейнеру book_manager_app использовать порт контейнера MySQL, а -t означает - tty, который выделяет псевдотерминал.
После выполнения этой команды мы нажмем http: // localhost: 10222 / book в браузере нашего хост-компьютера, и он вернет список книг.
Это все, что касается вводных знаний о Docker с простой реализацией Spring Boot и базой данных MySQL.
docker-compose up - это выполнит команды Dockerfile и запустит службы, определенные в файле docker-compose.
docker-compose down - остановит и удалит все контейнеры, запущенные файлом docker-compose.
docker-compose up --build - если мы выполняем обновление файла Dockerfile, файла war / jar или файла docker-compose, то мы должны выполнить эту команду, чтобы получить обновленные данные на машине Docker.
Теперь мы создадим три машины Docker. Один предназначен для управляющего узла, а два других - для рабочих узлов. Для этого воспользуемся следующими командами:
docker-machine create --driver virtualbox manager
Команда docker-machine env manager покажет информацию о среде для узла диспетчера.
Мы должны запустить команду eval $ (docker-machine env manager), чтобы настроить нашу оболочку. Затем мы можем получить два наших рабочих узла с помощью следующих команд:
docker-machine создать --driver virtualbox worker1
docker-machine создать --driver virtualbox worker2
После выполнения этой команды мы должны проверить созданные машины, выполнив команду docker-machine ls.
Подключаем наши машины к ssh
Переходим в корневой каталог проекта (book_manager), а затем оформить заказ в ветку docker-swarm. После этого нам нужно обновить источник данных в application.properties. Мы обновим следующий IP-адрес нашим управляющим узлом.
Запускаем команду gradle clean build, чтобы собрать этот проект.
